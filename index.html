<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶æƒ…æŠ¥ç«™</title>
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            max-width: 800px; margin: 0 auto; padding: 20px 15px;
            background: #f4f6f9; color: #333; font-size: 14px; 
        }
        
        /* --- å¤´éƒ¨ --- */
        .header { text-align: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #ddd; }
        .header h1 { margin: 0 0 8px 0; color: #111; letter-spacing: -0.5px; }
        .header p { color: #666; font-size: 0.9em; margin: 0; }
        
        /* --- ç­›é€‰å™¨ --- */
        .filters { display: flex; gap: 8px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn {
            background: white; border: 1px solid #ccc; padding: 6px 14px; border-radius: 20px;
            cursor: pointer; font-size: 0.9em; color: #555; transition: 0.2s;
        }
        .filter-btn.active { background: #222; color: white; border-color: #222; }
        
        /* --- å¡ç‰‡åˆ—è¡¨ --- */
        .card { 
            background: white; border-radius: 10px; padding: 18px; margin-bottom: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03); border: 1px solid #eef;
            transition: all 0.2s; cursor: pointer; /* é¼ æ ‡å˜æ‰‹å‹ */
        }
        .card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-color: #1976d2; }
        
        .meta { display: flex; justify-content: space-between; font-size: 0.8em; color: #999; margin-bottom: 8px; }
        .tag { padding: 2px 6px; border-radius: 4px; font-weight: 500; }
        .tag-cn { background: #e3f2fd; color: #1565c0; }
        .tag-en { background: #f3e5f5; color: #7b1fa2; }
        .tag-paper { background: #fff3e0; color: #e65100; border: 1px solid #ffe0b2; }

        .title { 
            font-size: 1.15em; font-weight: 600; color: #222; 
            margin-bottom: 6px; line-height: 1.4; 
        }
        /* é¢„è§ˆæ‘˜è¦ï¼ˆåªæ˜¾ç¤ºä¸€è¡Œï¼‰ */
        .preview-summary {
            color: #666; font-size: 0.9em; 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }

        /* --- å¼¹çª— (Modal) æ ·å¼ --- */
        .modal-overlay {
            display: none; /* é»˜è®¤éšè— */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1000;
            align-items: center; justify-content: center;
        }
        .modal-content {
            background: white; width: 90%; max-width: 600px;
            border-radius: 12px; padding: 25px;
            position: relative; animation: popIn 0.3s ease;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        @keyframes popIn { from {transform: scale(0.9); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        
        .close-btn {
            position: absolute; top: 15px; right: 20px;
            font-size: 24px; cursor: pointer; color: #999;
        }
        .close-btn:hover { color: #333; }
        
        /* å¼¹çª—å†…éƒ¨æ’ç‰ˆ */
        .modal-tag { display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 0.85em; margin-bottom: 10px; }
        .modal-title { font-size: 1.4em; font-weight: bold; margin-bottom: 15px; color: #111; line-height: 1.4; }
        .modal-body { 
            background: #f8f9fa; padding: 15px; border-radius: 8px; 
            font-size: 1em; line-height: 1.7; color: #444; margin-bottom: 20px;
            border-left: 4px solid #1976d2; 
            white-space: pre-line; /* ä¿æŒæ¢è¡Œ */
        }
        
        .read-btn {
            display: block; width: 100%; text-align: center;
            background: #111; color: white; padding: 12px; 
            border-radius: 8px; text-decoration: none; font-weight: bold;
            transition: 0.2s;
        }
        .read-btn:hover { background: #333; }

        /* --- ç¿»é¡µ --- */
        .pagination { display: flex; justify-content: center; gap: 15px; margin-top: 25px; }
        .page-btn { background: white; border: 1px solid #ddd; padding: 6px 16px; border-radius: 6px; cursor: pointer; }
        .page-btn:disabled { opacity: 0.5; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ¤– å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶æƒ…æŠ¥ç«™</h1>
        <p>å­¦æœ¯è®ºæ–‡ Â· äº§ä¸šåŠ¨æ€ Â· æ·±åº¦è§£è¯»</p>
    </div>

    <div class="filters">
        <button class="filter-btn active" onclick="filter('all')">å…¨éƒ¨</button>
        <button class="filter-btn" onclick="filter('Paper')">ğŸ“„ è®ºæ–‡</button>
        <button class="filter-btn" onclick="filter('å…·èº«æ™ºèƒ½')">ğŸ¦¾ å…·èº«æ™ºèƒ½</button>
        <button class="filter-btn" onclick="filter('è‡ªåŠ¨é©¾é©¶')">ğŸš— è‡ªåŠ¨é©¾é©¶</button>
    </div>

    <div id="list"><div style="text-align:center; padding:40px; color:#999;">Loading...</div></div>

    <div class="pagination" id="pagination" style="display:none;">
        <button class="page-btn" id="prev" onclick="changePage(-1)">ä¸Šä¸€é¡µ</button>
        <span id="pageInfo">1</span>
        <button class="page-btn" id="next" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
    </div>

    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()"> <span class="close-btn" onclick="closeModal()">&times;</span>
            
            <div id="m-tag" class="modal-tag tag-cn">TAG</div>
            <div id="m-title" class="modal-title">æ ‡é¢˜åŠ è½½ä¸­...</div>
            <div id="m-body" class="modal-body">AI æ‘˜è¦åŠ è½½ä¸­...</div>
            
            <a id="m-link" href="#" target="_blank" class="read-btn">é˜…è¯»åŸæ–‡ &rarr;</a>
        </div>
    </div>

    <script>
        let allData=[], filteredData=[], curPage=1;
        const perPage = 7;

        fetch('data.json?t='+Date.now()).then(r=>r.json()).then(data => {
            if(!data.length) { document.getElementById('list').innerHTML='æš‚æ— æ•°æ®'; return; }
            data.sort((a,b) => new Date(b.date)-new Date(a.date));
            allData = data;
            filter('all');
            document.getElementById('pagination').style.display='flex';
        }).catch(()=> document.getElementById('list').innerHTML='è¯·è¿è¡Œ Actions åˆå§‹åŒ–æ•°æ®');

        function filter(tag) {
            document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
            event.target.classList.add('active');
            if(tag==='all') filteredData = allData;
            else filteredData = allData.filter(i=>i.source.includes(tag) || (tag==='å…·èº«æ™ºèƒ½'&&i.source.includes('Embodied')));
            curPage=1; render();
        }

        function render() {
            const list = document.getElementById('list');
            list.innerHTML = '';
            const pageData = filteredData.slice((curPage-1)*perPage, curPage*perPage);
            
            pageData.forEach(item => {
                let tagType = 'tag-cn';
                if(item.lang==='EN') tagType='tag-en';
                if(item.source.includes('Paper')) tagType='tag-paper';

                // æ³¨æ„ï¼šè¿™é‡Œä¸å†ç”¨ <a> æ ‡ç­¾åŒ…è£¹æ ‡é¢˜ï¼Œè€Œæ˜¯æ•´ä¸ªå¡ç‰‡éƒ½æœ‰ onclick äº‹ä»¶
                const div = document.createElement('div');
                div.className = 'card';
                // å°†æ•°æ®ç»‘å®šåˆ°ç‚¹å‡»äº‹ä»¶ä¸­
                div.onclick = () => openModal(item, tagType); 
                
                div.innerHTML = `
                    <div class="meta">
                        <span class="tag ${tagType}">${item.source}</span>
                        <span>${item.date}</span>
                    </div>
                    <div class="title">${item.title}</div>
                    <div class="preview-summary">ğŸ’¡ ç‚¹å‡»æŸ¥çœ‹ AI æ·±åº¦è§£è¯»...</div>
                `;
                list.appendChild(div);
            });
            updatePageInfo();
        }

        function updatePageInfo() {
            const total = Math.ceil(filteredData.length/perPage);
            document.getElementById('pageInfo').innerText = `${curPage} / ${total||1}`;
            document.getElementById('prev').disabled = curPage===1;
            document.getElementById('next').disabled = curPage===total||total===0;
        }
        function changePage(d) { curPage+=d; render(); window.scrollTo(0,0); }

        // --- å¼¹çª—é€»è¾‘ ---
        function openModal(item, tagType) {
            const modal = document.getElementById('modal');
            
            // å¡«å……æ•°æ®
            document.getElementById('m-title').innerText = item.title;
            document.getElementById('m-body').innerText = item.summary || "æš‚æ— è¯¦ç»†è§£è¯»";
            document.getElementById('m-link').href = item.link;
            
            // è®¾ç½®æ ‡ç­¾æ ·å¼
            const tagEl = document.getElementById('m-tag');
            tagEl.className = `modal-tag ${tagType}`;
            tagEl.innerText = item.source;

            // æ˜¾ç¤ºå¼¹çª—
            modal.style.display = 'flex';
        }

        function closeModal(e) {
            // å¦‚æœä¼ å…¥äº†äº‹ä»¶(e)ï¼Œè¯´æ˜æ˜¯ç‚¹å‡»èƒŒæ™¯å…³é—­ï¼Œæ— éœ€é¢å¤–åˆ¤æ–­ï¼Œç›´æ¥å…³
            document.getElementById('modal').style.display = 'none';
        }
    </script>
</body>
</html>
