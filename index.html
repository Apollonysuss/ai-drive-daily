<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶å†…å‚</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* --- å…¨å±€è®¾ç½®ï¼šæ›´ç°ä»£çš„å­—ä½“å’ŒèƒŒæ™¯ --- */
        :root {
            --primary-color: #3498db; /* ä¸»è‰²è°ƒï¼šç§‘æŠ€è“ */
            --secondary-color: #2c3e50; /* æ·±è‰²æ–‡å­— */
            --bg-light: #f8f9fa; /* æµ…è‰²èƒŒæ™¯ */
            --sidebar-bg: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); /* ä¾§è¾¹æ æ¸å˜èƒŒæ™¯ */
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: var(--bg-light); color: #333; margin: 0; padding: 0; line-height: 1.6;
        }
        
        /* --- æ ¸å¿ƒå¸ƒå±€ï¼šGrid åŒæ  (å¢åŠ æ•´ä½“å†…è¾¹è·) --- */
        .container {
            max-width: 1200px; margin: 0 auto; padding: 30px 20px;
            display: grid; 
            grid-template-columns: 340px 1fr; /* å·¦ä¾§ç¨å®½ä¸€ç‚¹ */
            gap: 35px; align-items: start;
        }

        /* --- å·¦ä¾§æ—¥æŠ¥æ  (ç¾åŒ–é‡ç‚¹) --- */
        .sidebar {
            background: var(--sidebar-bg); color: rgba(255,255,255,0.9); 
            border-radius: 16px; padding: 30px;
            position: sticky; top: 30px;
            max-height: calc(100vh - 60px); overflow-y: auto;
            box-shadow: 0 15px 30px rgba(0,0,0,0.15); /* æ›´å¼ºçš„ç«‹ä½“æ„Ÿ */
        }
        .sidebar-header { border-bottom: 1px solid rgba(255,255,255,0.15); padding-bottom: 15px; margin-bottom: 20px; }
        .sidebar h2 { margin: 0; font-size: 1.5em; color: white; display: flex; align-items: center; gap: 10px; }
        .sidebar-date { font-size: 0.85em; color: rgba(255,255,255,0.6); margin-top: 5px; display: block; }
        
        /* Markdown å†…å®¹ç¾åŒ– */
        .brief-content { font-size: 0.95em; }
        .brief-content h3 { color: #5dade2; margin-top: 25px; font-size: 1.15em; display: flex; align-items: center; }
        .brief-content h3::before { content: 'ğŸ”¹'; font-size: 0.8em; margin-right: 8px; } /* ç»™å°æ ‡é¢˜åŠ è£…é¥° */
        .brief-content strong { color: #f4d03f; font-weight: 600; } /* å¼ºè°ƒæ–‡å­—æ ‡é»„ */
        .brief-content ul { padding-left: 20px; }
        .brief-content li { margin-bottom: 10px; }
        .sidebar-loading { text-align: center; color: rgba(255,255,255,0.5); padding: 40px 20px; background: rgba(0,0,0,0.1); border-radius: 12px; }

        /* --- å³ä¾§æ–°é—»æµ --- */
        .main-content { min-width: 0; }
        
        .header { margin-bottom: 30px; text-align: center; }
        .header h1 { margin: 0; color: var(--secondary-color); font-size: 2em; font-weight: 800; letter-spacing: -1px; }
        .header p { color: #666; margin-top: 5px; }

        /* ç­›é€‰æŒ‰é’® (èƒ¶å›Šæ ·å¼) */
        .filters { display: flex; gap: 12px; justify-content: center; margin-bottom: 30px; flex-wrap: wrap; }
        .filter-btn { 
            background: white; border: none; padding: 8px 18px; border-radius: 30px; 
            cursor: pointer; color: #555; font-weight: 600; font-size: 0.9em;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: all 0.2s;
        }
        .filter-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .filter-btn.active { background: var(--primary-color); color: white; box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3); }

        /* --- æ–°é—»å¡ç‰‡ (æ›´å¹²å‡€ã€æ‚¬æµ®æ„Ÿ) --- */
        .card { 
            background: white; border-radius: 16px; padding: 25px; margin-bottom: 20px; 
            /* å»æ‰è¾¹æ¡†ï¼Œæ”¹ç”¨æŸ”å’Œçš„é˜´å½± */
            border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); 
            cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative; overflow: hidden;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 12px 24px rgba(0,0,0,0.08); }
        /* ç»™å¡ç‰‡åŠ ä¸€ä¸ªå¾®å¦™çš„é¡¶éƒ¨å½©è‰²æ¡è£…é¥° */
        .card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, var(--primary-color), #a1c4fd); opacity: 0; transition: opacity 0.3s; }
        .card:hover::before { opacity: 1; }

        .meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.85em; color: #aaa; margin-bottom: 15px; }
        .tag { padding: 4px 10px; border-radius: 6px; font-weight: 600; font-size: 0.85em; letter-spacing: 0.5px; }
        .tag-cn { background: #ebf5fb; color: #2980b9; }
        .tag-en { background: #f4ecf7; color: #8e44ad; }
        .tag-paper { background: #fef5e7; color: #d35400; }

        .title { font-size: 1.3em; font-weight: 700; color: #2c3e50; margin-bottom: 15px; line-height: 1.4; }
        
        /* AI æ‘˜è¦æ¡† (é‡æ–°è®¾è®¡æˆå¯¹è¯æ°”æ³¡é£æ ¼) */
        .summary-box { 
            background: #f1f9ff; /* ææ·¡çš„è“è‰²èƒŒæ™¯ */
            padding: 15px 20px; border-radius: 12px; 
            font-size: 0.95em; color: #445566; line-height: 1.6;
            position: relative;
            display: flex; gap: 12px; align-items: flex-start;
        }
        /* åŠ ä¸€ä¸ªæœºå™¨äººå›¾æ ‡ */
        .summary-box::before { content: 'ğŸ¤–'; font-size: 1.4em; }

        /* --- ç¿»é¡µ & è·³è½¬ --- */
        .pagination { 
            display: flex; justify-content: center; align-items: center; gap: 15px; 
            margin-top: 40px; background: white; padding: 20px; border-radius: 16px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }
        .page-btn { background: var(--bg-light); border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; color: #555; transition: 0.2s; }
        .page-btn:hover:not(:disabled) { background: var(--primary-color); color: white; }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .jump-box { display: flex; align-items: center; gap: 8px; margin-left: 15px; padding-left: 20px; border-left: 2px solid #eee; }
        .jump-input { width: 50px; padding: 8px; border: 2px solid #eee; border-radius: 8px; text-align: center; font-weight: bold; color: #555; outline: none; transition: 0.2s; }
        .jump-input:focus { border-color: var(--primary-color); }
        .jump-btn { background: var(--secondary-color); color: white; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: 0.2s; }
        .jump-btn:hover { background: black; }

        /* --- å¼¹çª—ç¾åŒ– --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(44, 62, 80, 0.7); /* æ·±è‰²åŠé€æ˜èƒŒæ™¯ */ z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); /* èƒŒæ™¯æ¨¡ç³Š */ }
        .modal-content { background: white; width: 90%; max-width: 650px; border-radius: 20px; padding: 35px; position: relative; box-shadow: 0 20px 40px rgba(0,0,0,0.2); animation: slideUp 0.3s ease; }
        @keyframes slideUp { from {transform: translateY(20px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 28px; cursor: pointer; color: #ccc; transition: 0.2s; }
        .close-btn:hover { color: #333; transform: rotate(90deg); }
        .modal-title { font-size: 1.5em; font-weight: 800; color: #2c3e50; margin-top: 10px; }
        .modal-body { font-size: 1.05em; line-height: 1.8; color: #444; margin: 25px 0; background: var(--bg-light); padding: 20px; border-radius: 12px; }
        .read-btn { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; text-align: center; background: var(--primary-color); color: white; padding: 15px; border-radius: 12px; text-decoration: none; font-weight: 700; font-size: 1.1em; transition: 0.2s; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4); }
        .read-btn:hover { background: #2980b9; transform: translateY(-2px); }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 900px) { 
            .container { grid-template-columns: 1fr; gap: 30px; } 
            .sidebar { position: static; max-height: 500px; } 
            .header h1 { font-size: 1.5em; }
            .pagination { flex-direction: column; gap: 20px; }
            .jump-box { border-left: none; padding-left: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>ğŸ“° æ¯æ—¥è¡Œä¸šå†…å‚</h2>
            <span class="sidebar-date" id="brief-date">åŠ è½½ä¸­...</span>
        </div>
        <div id="brief-container">
            <div class="sidebar-loading">
                <p style="font-size: 3em; margin-bottom: 10px;">ğŸ“Š</p>
                æ­£åœ¨åˆ†æä»Šæ—¥æ•°æ®ï¼Œç”Ÿæˆ AI ç»¼è¿°...<br>
                <span style="font-size:0.8em; opacity:0.7;">(è‹¥é•¿æ—¶é—´æœªæ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥ Actions è¿è¡ŒçŠ¶æ€)</span>
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div class="header">
            <h1>ğŸ¤– å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶æƒ…æŠ¥ç«™</h1>
            <p>å…¨çƒå‰æ²¿æŠ€æœ¯ä¸äº§ä¸šåŠ¨æ€è¿½è¸ª</p>
        </div>
        
        <div class="filters">
            <button class="filter-btn active" onclick="filter('all')">å…¨éƒ¨åŠ¨æ€</button>
            <button class="filter-btn" onclick="filter('Paper')">ğŸ“„ å­¦æœ¯è®ºæ–‡</button>
            <button class="filter-btn" onclick="filter('å…·èº«æ™ºèƒ½')">ğŸ¦¾ å…·èº«æ™ºèƒ½</button>
            <button class="filter-btn" onclick="filter('è‡ªåŠ¨é©¾é©¶')">ğŸš— è‡ªåŠ¨é©¾é©¶</button>
        </div>

        <div id="list" style="min-height: 300px;">
            <div style="text-align:center; padding:60px; color:#aaa; font-size: 1.1em;">
                ğŸ”„ æ­£åœ¨è¿æ¥æ•°æ®åº“åŠ è½½æœ€æ–°æƒ…æŠ¥...
            </div>
        </div>

        <div class="pagination" id="pagination" style="display:none;">
            <button class="page-btn" id="prev" onclick="changePage(-1)">â† ä¸Šä¸€é¡µ</button>
            <span id="pageInfo" style="font-weight:600; color:#555;">1 / 1</span>
            <button class="page-btn" id="next" onclick="changePage(1)">ä¸‹ä¸€é¡µ â†’</button>
            
            <div class="jump-box">
                <span style="color:#999; font-size: 0.9em;">è·³è½¬è‡³</span>
                <input type="number" id="jumpInput" class="jump-input" min="1">
                <button class="jump-btn" onclick="jumpToPage()">Go</button>
            </div>
        </div>
    </main>
</div>

<div class="modal-overlay" id="modal" onclick="document.getElementById('modal').style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close-btn" onclick="document.getElementById('modal').style.display='none'">&times;</span>
        <span id="m-tag" class="tag" style="font-size: 0.8em;">TAG</span>
        <h3 id="m-title" class="modal-title"></h3>
        <div id="m-body" class="modal-body"></div>
        <a id="m-link" href="#" target="_blank" class="read-btn">
            é˜…è¯»åŸæ–‡ / æŸ¥çœ‹è¯¦æƒ… â†—
        </a>
    </div>
</div>

<script>
    let allData=[], filteredData=[], curPage=1; const perPage=6;

    // 1. åŠ è½½æ–°é—»
    fetch('data.json?t='+Date.now()).then(r=>r.json()).then(data => {
        if(!data.length) { document.getElementById('list').innerHTML='<div style="text-align:center;padding:60px;color:#aaa;">ğŸ“­ æš‚æ— æ•°æ®ï¼Œè¯·ç­‰å¾… AI æŠ“å–...</div>'; return; }
        data.sort((a,b) => new Date(b.date)-new Date(a.date));
        allData = data; filter('all');
        document.getElementById('pagination').style.display='flex';
    }).catch(e=>console.log(e));

    // 2. åŠ è½½æ—¥æŠ¥
    fetch('daily_brief.json?t='+Date.now())
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(data => {
            document.getElementById('brief-date').innerText = data.date;
            // ä½¿ç”¨ marked æ¸²æŸ“ Markdown
            const htmlContent = marked.parse(data.content);
            document.getElementById('brief-container').innerHTML = `
                <div class="brief-content">${htmlContent}</div>
            `;
        })
        .catch(() => {
            // ä¿æŒé»˜è®¤çš„åŠ è½½ä¸­å ä½ç¬¦å³å¯ï¼Œä¸éœ€è¦é¢å¤–æ“ä½œ
        });

    function filter(tag) {
        document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
        event.target.classList.add('active');
        filteredData = tag==='all'?allData:allData.filter(i=>i.source.includes(tag)||(tag==='å…·èº«æ™ºèƒ½'&&i.source.includes('Embodied')));
        curPage=1; render();
    }

    function render() {
        const list = document.getElementById('list'); list.innerHTML='';
        const pageData = filteredData.slice((curPage-1)*perPage, curPage*perPage);
        if(!pageData.length) { list.innerHTML='<div style="text-align:center;padding:60px;color:#aaa;">è¯¥åˆ†ç±»ä¸‹æš‚æ— å†…å®¹</div>'; return;}
        
        pageData.forEach(item => {
            let tagType = item.lang==='EN'?'tag-en':(item.source.includes('Paper')?'tag-paper':'tag-cn');
            const d = document.createElement('div'); d.className='card';
            d.onclick=()=>openModal(item, tagType); // ä¼  tagType è¿›å»
            d.innerHTML = `
                <div class="meta"><span class="tag ${tagType}">${item.source}</span><span>${item.date}</span></div>
                <div class="title">${item.title}</div>
                <div class="summary-box">
                    <div>${item.summary||"AI æ­£åœ¨å…¨åŠ›ç”Ÿæˆè§£è¯»ä¸­ï¼Œè¯·ç¨å..."}</div>
                </div>
            `;
            list.appendChild(d);
        });
        updatePageInfo();
    }

    function updatePageInfo() {
        const total = Math.ceil(filteredData.length/perPage);
        document.getElementById('pageInfo').innerText = `${curPage} / ${total||1}`;
        document.getElementById('prev').disabled = curPage===1;
        document.getElementById('next').disabled = curPage===total||total===0;
    }

    function changePage(d) { curPage+=d; render(); window.scrollTo({ top: 0, behavior: 'smooth' }); } // å¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨
    
    function jumpToPage() {
        const input = document.getElementById('jumpInput');
        const p = parseInt(input.value);
        const total = Math.ceil(filteredData.length/perPage);
        if(p>=1 && p<=total) { curPage=p; render(); window.scrollTo({ top: 0, behavior: 'smooth' }); input.value=''; }
        else alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¡µç  (1-' + total + ')');
    }

    function openModal(item, tagType) {
        // è®¾ç½®æ ‡ç­¾æ ·å¼
        const tagEl = document.getElementById('m-tag');
        tagEl.className = `tag ${tagType}`;
        tagEl.innerText = item.source;

        document.getElementById('m-title').innerText=item.title;
        // å¦‚æœæ‘˜è¦æ˜¯é»˜è®¤çš„å ä½ç¬¦ï¼Œå¼¹çª—é‡Œç»™ä¸ªæ›´æœ‰å¥½çš„æç¤º
        const bodyText = item.summary === "AI æ­£åœ¨å…¨åŠ›ç”Ÿæˆè§£è¯»ä¸­ï¼Œè¯·ç¨å..." ? "ğŸ¤– AI å°šæœªå®Œæˆå¯¹è¯¥å†…å®¹çš„æ·±åº¦åˆ†æï¼Œè¯·ç¨åå†è¯•ã€‚" : (item.summary || "æš‚æ— è§£è¯»");
        document.getElementById('m-body').innerText = bodyText;

        document.getElementById('m-link').href=item.link;
        document.getElementById('modal').style.display='flex';
    }
</script>
</body>
</html>
