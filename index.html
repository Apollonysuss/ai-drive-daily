<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶å†…å‚</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary: #2980b9;
            --bg: #f4f7f6;
            --sidebar: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: #333; margin: 0; padding: 0; }
        
        /* --- å¸ƒå±€ --- */
        .container {
            max-width: 1200px; margin: 0 auto; padding: 20px;
            display: grid; grid-template-columns: 320px 1fr; gap: 30px; align-items: start;
        }

        /* --- å·¦ä¾§æ—¥æŠ¥ --- */
        .sidebar {
            background: var(--sidebar); color: white; border-radius: 12px; padding: 25px;
            position: sticky; top: 20px; max-height: 90vh; overflow-y: auto;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .sidebar h2 { margin: 0 0 10px 0; font-size: 1.4em; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px; }
        .sidebar-date { font-size: 0.8em; opacity: 0.8; display: block; margin-bottom: 15px; }
        .brief-content { font-size: 0.95em; line-height: 1.6; color: #ecf0f1; }
        .brief-content h3 { color: #81d4fa; margin-top: 20px; }
        .brief-content strong { color: #ffe082; }

        /* --- å³ä¾§å†…å®¹ --- */
        .main-content { min-width: 0; }
        .header { background: white; padding: 25px; border-radius: 12px; margin-bottom: 20px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        .header h1 { margin: 0; color: #2c3e50; font-size: 1.8em; }

        /* ç­›é€‰å™¨ */
        .filters { display: flex; gap: 10px; justify-content: center; margin-bottom: 25px; flex-wrap: wrap; }
        .filter-btn {
            background: white; border: 1px solid #ddd; padding: 8px 18px; border-radius: 20px;
            cursor: pointer; color: #666; font-weight: 500; transition: 0.2s;
        }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* å¡ç‰‡ */
        .card { 
            background: white; border-radius: 12px; padding: 20px; margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.03); cursor: pointer; transition: 0.2s;
            border-left: 4px solid transparent;
        }
        .card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); border-left-color: var(--primary); }
        
        .meta { display: flex; justify-content: space-between; font-size: 0.85em; color: #999; margin-bottom: 10px; }
        .tag { padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 0.85em; }
        .tag-cn { background: #e3f2fd; color: #1565c0; }
        .tag-en { background: #f3e5f5; color: #7b1fa2; }
        .tag-paper { background: #fff8e1; color: #f57f17; }
        
        .title { font-size: 1.2em; font-weight: 700; color: #333; margin-bottom: 10px; line-height: 1.4; }
        .summary-box { background: #f8f9fa; padding: 12px; border-radius: 8px; font-size: 0.95em; color: #555; display: flex; gap: 10px; }
        .summary-icon { font-size: 1.2em; }

        /* --- ğŸ‘‡ ç¿»é¡µ & è·³è½¬åŒºåŸŸ (é‡ç‚¹åŠ å¼º) --- */
        .pagination { 
            display: flex; justify-content: center; align-items: center; gap: 15px; 
            margin-top: 35px; background: white; padding: 20px; border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .page-btn {
            background: #f0f2f5; border: none; padding: 10px 20px; border-radius: 8px; 
            cursor: pointer; font-weight: 600; color: #555; transition: 0.2s;
        }
        .page-btn:hover:not(:disabled) { background: var(--primary); color: white; }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .jump-container {
            display: flex; align-items: center; gap: 8px; 
            padding-left: 20px; border-left: 2px solid #eee; margin-left: 10px;
        }
        .jump-input {
            width: 50px; padding: 8px; border: 2px solid #eee; border-radius: 6px; 
            text-align: center; font-weight: bold; outline: none;
        }
        .jump-input:focus { border-color: var(--primary); }
        .jump-btn {
            background: #2c3e50; color: white; border: none; padding: 8px 15px; 
            border-radius: 6px; cursor: pointer; font-weight: bold;
        }

        /* å¼¹çª— */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; }
        .modal-content { background: white; width: 90%; max-width: 650px; border-radius: 16px; padding: 30px; position: relative; animation: pop 0.3s ease; }
        @keyframes pop { from {transform: scale(0.9); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        .close-btn { position: absolute; top: 20px; right: 20px; font-size: 28px; cursor: pointer; color: #ccc; }
        .close-btn:hover { color: #333; }
        .read-btn { display: block; width: 100%; text-align: center; background: var(--primary); color: white; padding: 12px; border-radius: 8px; text-decoration: none; font-weight: bold; margin-top: 20px; }

        @media (max-width: 800px) {
            .container { grid-template-columns: 1fr; }
            .sidebar { position: static; max-height: none; }
            .pagination { flex-direction: column; gap: 20px; }
            .jump-container { border-left: none; padding-left: 0; margin-left: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <aside class="sidebar">
        <h2>ğŸ“… æ¯æ—¥å†…å‚</h2>
        <span class="sidebar-date" id="brief-date">åŠ è½½ä¸­...</span>
        <div id="brief-container">
            <div style="text-align:center; padding: 30px; opacity: 0.7;">
                æ­£åœ¨åŠ è½½ä»Šæ—¥ AI ç»¼è¿°...
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div class="header">
            <h1>ğŸ¤– å…·èº«æ™ºèƒ½ & è‡ªåŠ¨é©¾é©¶æƒ…æŠ¥</h1>
        </div>

        <div class="filters">
            <button class="filter-btn active" onclick="filter('all')">å…¨éƒ¨</button>
            <button class="filter-btn" onclick="filter('Paper')">ğŸ“„ è®ºæ–‡</button>
            <button class="filter-btn" onclick="filter('å…·èº«æ™ºèƒ½')">ğŸ¦¾ å…·èº«æ™ºèƒ½</button>
            <button class="filter-btn" onclick="filter('è‡ªåŠ¨é©¾é©¶')">ğŸš— è‡ªåŠ¨é©¾é©¶</button>
        </div>

        <div id="list">
            <div style="text-align:center; padding: 50px; color:#999;">æ•°æ®åŠ è½½ä¸­...</div>
        </div>

        <div class="pagination" id="pagination" style="display:none;">
            <button class="page-btn" id="prev" onclick="changePage(-1)">â† ä¸Šä¸€é¡µ</button>
            <span id="pageInfo" style="font-weight:600; color:#555;">1 / 1</span>
            <button class="page-btn" id="next" onclick="changePage(1)">ä¸‹ä¸€é¡µ â†’</button>
            
            <div class="jump-container">
                <span style="font-size:0.9em; color:#888;">è·³è‡³</span>
                <input type="number" id="jumpInput" class="jump-input" min="1">
                <button class="jump-btn" onclick="jumpToPage()">Go</button>
            </div>
        </div>
    </main>
</div>

<div class="modal-overlay" id="modal" onclick="document.getElementById('modal').style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close-btn" onclick="document.getElementById('modal').style.display='none'">&times;</span>
        <h3 id="m-title" style="margin-top:0; color:#2c3e50;"></h3>
        <div id="m-body" style="line-height:1.7; color:#444; background:#f9f9f9; padding:15px; border-radius:8px;"></div>
        <a id="m-link" href="#" target="_blank" class="read-btn">é˜…è¯»åŸæ–‡</a>
    </div>
</div>

<script>
    let allData=[], filteredData=[], curPage=1; const perPage=6;

    // åŠ è½½æ•°æ®
    fetch('data.json?t='+Date.now()).then(r=>r.json()).then(data => {
        if(!data.length) { document.getElementById('list').innerHTML='<div style="text-align:center;padding:50px;">æš‚æ— æ•°æ®</div>'; return; }
        data.sort((a,b) => new Date(b.date)-new Date(a.date));
        allData = data; filter('all');
        // æ•°æ®åŠ è½½å®Œåï¼Œæ˜¾ç¤ºç¿»é¡µæ 
        document.getElementById('pagination').style.display='flex';
    }).catch(e=>console.log(e));

    // åŠ è½½æ—¥æŠ¥
    fetch('daily_brief.json?t='+Date.now())
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(data => {
            document.getElementById('brief-date').innerText = "æ›´æ–°äº: " + data.date;
            document.getElementById('brief-container').innerHTML = `<div class="brief-content">${marked.parse(data.content)}</div>`;
        })
        .catch(() => {
            document.getElementById('brief-container').innerHTML = '<div style="text-align:center;padding:20px;opacity:0.7;">ä»Šæ—¥ç»¼è¿°å°šæœªç”Ÿæˆ</div>';
        });

    function filter(tag) {
        document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
        event.target.classList.add('active');
        filteredData = tag==='all'?allData:allData.filter(i=>i.source.includes(tag)||(tag==='å…·èº«æ™ºèƒ½'&&i.source.includes('Embodied')));
        curPage=1; render();
    }

    function render() {
        const list = document.getElementById('list'); list.innerHTML='';
        const pageData = filteredData.slice((curPage-1)*perPage, curPage*perPage);
        if(!pageData.length) { list.innerHTML='<div style="text-align:center;padding:50px;color:#aaa;">æ— å†…å®¹</div>'; return;}
        
        pageData.forEach(item => {
            let tagType = item.lang==='EN'?'tag-en':(item.source.includes('Paper')?'tag-paper':'tag-cn');
            const d = document.createElement('div'); d.className='card';
            d.onclick=()=>openModal(item);
            d.innerHTML = `
                <div class="meta"><span class="tag ${tagType}">${item.source}</span><span>${item.date}</span></div>
                <div class="title">${item.title}</div>
                <div class="summary-box"><span class="summary-icon">ğŸ¤–</span><div>${item.summary||"AI åˆ†æä¸­..."}</div></div>
            `;
            list.appendChild(d);
        });
        updatePageInfo();
    }

    function updatePageInfo() {
        const total = Math.ceil(filteredData.length/perPage);
        document.getElementById('pageInfo').innerText = `${curPage} / ${total||1}`;
        document.getElementById('prev').disabled = curPage===1;
        document.getElementById('next').disabled = curPage===total||total===0;
    }

    function changePage(d) { curPage+=d; render(); window.scrollTo({top:0, behavior:'smooth'}); }
    
    // --- ä½ çš„è·³è½¬åŠŸèƒ½ ---
    function jumpToPage() {
        const input = document.getElementById('jumpInput');
        const p = parseInt(input.value);
        const total = Math.ceil(filteredData.length/perPage);
        
        if(p>=1 && p<=total) {
            curPage = p;
            render();
            window.scrollTo({top:0, behavior:'smooth'});
            input.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        } else {
            alert('é¡µç ä¸å­˜åœ¨ï¼Œè¯·è¾“å…¥ 1 åˆ° ' + total + ' ä¹‹é—´çš„æ•°å­—');
        }
    }

    function openModal(item) {
        document.getElementById('m-title').innerText=item.title;
        document.getElementById('m-body').innerText=item.summary||"æš‚æ— æ‘˜è¦";
        document.getElementById('m-link').href=item.link;
        document.getElementById('modal').style.display='flex';
    }
</script>
</body>
</html>
